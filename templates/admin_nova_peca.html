{% extends "admin_base.html" %}

{% block title %} Nova Peça {% endblock %}

{% block extrastyle %}
    #id_slug {
        border: none;
        color:  #ccc;
    }
    label[for=id_slug] { color: #ccc; }
    input[type=text] { width: 80%; }
{% endblock %}

{% block content %}
    <h1 class="page-header">Sobre o FutureMaster</h1>
    <div class="panel panel-default">
        <div class="panel-heading">
            Peças
        </div>
        <div class="panel-body">
            <form action="." method="post">{% csrf_token %}
                {% for field in form %}
                        <div class="col-xs-12">
                            <div class="form-group">
                                {{ field.label_tag }} {{ field }} {{ field.errors }}
                                <p class="text-mute">
                                    <small>{{ field.help_text }}</small>
                                </p>
                            </div>
                        </div>
                {% endfor %}
                <div class="col-xs-12">
                    <br /><br />
                    <fieldset>
                        <legend>Quantidade de peças por tamanho</legend>
                        {{ quantidade_form.management_form }}
                        {{ quantidade_form.non_form_errors }}
                        {% for form in quantidade_form %}
                            {{ form.id }}
                            <div class="inline {{ quantidade_form.prefix }}">
                                {{ form.tamanho.label_tag }}
                                {{ form.tamanho }}
                                {{ form.tamanho.errors }}
                                {{ form.quantidade_comprada.label_tag }}
                                {{ form.quantidade_comprada }}
                                {{ form.quantidade_comprada.errors }}
                                {{ form.quantidade_em_estoque.label_tag }}
                                {{ form.quantidade_em_estoque }}
                                {{ form.quantidade_em_estoque.errors }}
                            </div>
                        {% endfor %}
                    </fieldset>
                </div>
                <p class="text-right">
                    <button class="btn btn-primary" type="submit" value="Salvar">Salvar</button>
                </p>
            </form>
        </div>
    </div>{# /.panel #}
{% endblock content %}

{% block extrascriptindocumentready %}
    $('#id_peça-genero').parent().parent().append('<hr />');
    $('#id_peça-mostrar_no_site').parent().append('<hr />');
    $('#id_peça-custo_unitario').parent().append('<hr />');
    $('#id_peça-preco_unitario_promocional').parent().append('<hr />');
    $('#id_peça-nome').keyup(function(){
        var text = $(this).val();
        $('#id_slug').val(convertToSlug(text));
    })
{% endblock extrascriptindocumentready %}

{% block extrascript %}
    $(function() {
        $(".inline.{{ quantidade_form.prefix }}").formset({
            prefix: "{{ quantidade_form.prefix }}",
        })
    })
{% endblock %}
